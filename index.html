<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gusano con texto "chispas poto"</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100vh; background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    font-family: monospace;
    color: #0f0;
  }

  #game-area {
    position: relative;
    width: 600px;
    height: 300px;
    background: #111;
    border: 3px solid #0f0;
    border-radius: 10px;
  }

  .segment {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #0f0;
    border-radius: 10px;
    box-shadow: 0 0 8px #0f0;
  }

  #text {
    position: absolute;
    font-size: 24px;
    font-weight: bold;
    color: #0f0;
    text-shadow:
      0 0 8px #0f0,
      0 0 16px #0f0;
    user-select: none;
    pointer-events: none;
  }
</style>
</head>
<body>

<div id="game-area">
  <div id="text">chispas poto</div>
</div>

<script>
  const gameArea = document.getElementById('game-area');
  const text = document.getElementById('text');

  const segmentSize = 20;
  const totalSegments = 10; // longitud de la serpiente

  // Crear segmentos del gusano
  const segments = [];
  for(let i = 0; i < totalSegments; i++) {
    const seg = document.createElement('div');
    seg.classList.add('segment');
    gameArea.appendChild(seg);
    segments.push({el: seg, x: 0, y: 0});
  }

  // Estado de la serpiente
  let headX = 0;
  let headY = gameArea.clientHeight / 2 - segmentSize/2;

  let speedX = 1; // velocidad horizontal (px por frame)
  let direction = 1; // 1 = derecha, -1 = izquierda

  function update() {
    // Mover cabeza
    headX += speedX * direction;

    // Rebotar en los bordes
    if (headX > gameArea.clientWidth - segmentSize) {
      direction = -1;
      headX = gameArea.clientWidth - segmentSize;
    } else if (headX < 0) {
      direction = 1;
      headX = 0;
    }

    // Mover segmentos - el cuerpo sigue a la cabeza
    // Cada segmento toma la posición del anterior con un retraso
    for(let i = segments.length -1; i > 0; i--) {
      segments[i].x = segments[i-1].x;
      segments[i].y = segments[i-1].y;
    }
    segments[0].x = headX;
    segments[0].y = headY;

    // Actualizar posiciones en DOM
    segments.forEach(seg => {
      seg.el.style.left = seg.x + 'px';
      seg.el.style.top = seg.y + 'px';
    });

    // Colocar texto justo después de la última sección del cuerpo
    const lastSeg = segments[segments.length -1];
    text.style.left = (lastSeg.x + segmentSize + 10) + 'px';
    text.style.top = (lastSeg.y + segmentSize/2 - text.clientHeight/2) + 'px';

    requestAnimationFrame(update);
  }

  update();

  // Actualizar al cambiar tamaño ventana
  window.addEventListener('resize', () => {
    headY = gameArea.clientHeight / 2 - segmentSize/2;
  });
</script>

</body>
</html>
